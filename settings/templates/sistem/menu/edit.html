{% extends "admin_base.html" %}

{% block page_title %}Edit Menu{% endblock %}
{% block page_heading %}Edit Menu{% endblock %}

{% block breadcrumbs %}
<li class="breadcrumb-item"><a href="/settings/overview">Overview</a></li>
<li class="breadcrumb-item"><a href="/settings/sistem/menu">Menu</a></li>
<li class="breadcrumb-item"><a href="/settings/sistem/menu/{{ portal.portal_id }}/edit">{{ portal.portal_nm }}</a></li>
<li class="breadcrumb-item active">Edit Item</li>
{% endblock %}

{% block content %}
<div class="card">
  <div class="card-header">
    <h3 class="card-title">Edit Menu</h3>
    <div class="card-tools">
      <a href="{% url 'menu_edit' portal.portal_id %}" class="btn btn-sm btn-secondary">
        <i class="bi bi-arrow-left"></i> Kembali
      </a>
    </div>
  </div>
  <div class="card-body">
    <form method="post" action="{% url 'menu_item_edit' portal.portal_id item.nav_id %}">
      {% csrf_token %}
      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label>Parent Menu</label>
            <select id="parent_id" name="parent_id" class="form-control" style="width:100%">
              {% for opt in parent_options %}
                <option value="{{ opt.nav_id }}" {% if item.nav_parent == opt.nav_id %}selected{% endif %}>{{ opt.label }}</option>
              {% endfor %}
            </select>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group">
            <label>Nav Icon</label>
            <input type="text" name="nav_icon" class="form-control" value="{{ item.nav_icon|default_if_none:'' }}" placeholder="e.g. bi bi-gear" />
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label>Nav Title</label>
            <input type="text" name="nav_name" class="form-control" value="{{ item.nav_name|default_if_none:'' }}" required />
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group">
            <label>Nav URL</label>
            <input type="text" name="nav_url" class="form-control" value="{{ item.nav_url|default_if_none:'' }}" placeholder="path/relative" />
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label>Nav Desc</label>
            <textarea name="nav_desc" class="form-control" rows="2" placeholder="Optional description">{{ item.nav_desc|default_if_none:'' }}</textarea>
          </div>
        </div>
        <div class="col-md-2">
          <div class="form-group">
            <label>Nav Order</label>
            <input type="number" name="nav_order" class="form-control" value="{{ item.nav_order|default_if_none:'0' }}" />
          </div>
        </div>
        <div class="col-md-2">
          <div class="form-group">
            <label>Active Status</label>
            <select name="active_st" class="form-control">
              <option value="1" {% if item.active_st == '1' %}selected{% endif %}>Active</option>
              <option value="0" {% if item.active_st == '0' %}selected{% endif %}>Inactive</option>
            </select>
          </div>
        </div>
        <div class="col-md-2">
          <div class="form-group">
            <label>Display Status</label>
            <select name="display_st" class="form-control">
              <option value="1" {% if item.display_st == '1' %}selected{% endif %}>Display</option>
              <option value="0" {% if item.display_st == '0' %}selected{% endif %}>Hidden</option>
            </select>
          </div>
        </div>
      </div>
      <div class="mt-2">
        <button type="submit" class="btn btn-primary"><i class="bi bi-save"></i> Save</button>
        <a href="/settings/sistem/menu/{{ portal.portal_id }}/edit" class="btn btn-secondary">Cancel</a>
      </div>
    </form>
  </div>
</div>

<script>
  $(document).ready(function() {
    $('#parent_id').select2({ placeholder: 'Choose parent menu', allowClear: true });
  });
  $.fn.select2.defaults.set("theme", "bootstrap");
  $.fn.select2.defaults.set("width", "100%");
</script>
{% endblock %}