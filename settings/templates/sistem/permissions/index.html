{% extends "admin_base.html" %}

{% block page_title %}Permissions{% endblock %}
{% block page_heading %}Permissions{% endblock %}

{% block breadcrumbs %}
<li class="breadcrumb-item"><a href="/settings/overview">Overview</a></li>
<li class="breadcrumb-item active">Permissions</li>
{% endblock %}

{% block content %}
<div class="container-fluid">
  {% if messages %}
    <div aria-live="polite" aria-atomic="true" class="mb-3">
      {% for message in messages %}
        <div class="alert alert-{% if message.tags == 'error' %}danger{% else %}{{ message.tags|default:'info' }}{% endif %} alert-dismissible fade show" role="alert">
          <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}

  <div class="card">
    <div class="card-header">Roles</div>
    <div class="card-body">
      <div class="table-responsive">
        <table id="permissionsTable" class="table table-striped" style="width:100%">
          <thead class="thead-dark text-center">
            <tr>
              <th style="width:10%">ID</th>
              <th style="width:20%">Group</th>
              <th style="width:40%">Roles</th>
              <th style="width:20%">Default Page</th>
              <th style="width:10%"></th>
            </tr>
          </thead>
          <tbody>
            {% for r in roles %}
            <tr>
              <td class="text-center">{{ r.role_id }}</td>
              <td><b>{{ r.group_name|upper }}</b></td>
              <td>
                <b class="text-primary">{{ r.role_nm }}</b><br>
                <small class="text-muted">{{ r.role_desc }}</small>
              </td>
              <td>{{ r.default_page }}</td>
              <td class="text-center">
                <a href="/settings/sistem/permissions/access_update/{{ r.role_id }}" class="btn btn-sm btn-success" title="Edit Access">
                  <i class="bi bi-pencil"></i>
                </a>
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="5" class="text-center">Data tidak ditemukan!</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
  
</div>
{% endblock %}

{% block more_scripts %}
<script>
  $(function(){
    $('#permissionsTable').DataTable({
      responsive: true,
      paging: true,
      lengthChange: true,
      searching: true,
      ordering: true,
      info: true,
      autoWidth: false,
      order: [[1, 'asc'], [0, 'asc']],
      columnDefs: [
        { targets: [0,4], className: 'text-center' },
        { targets: 2, width: '40%' }
      ]
    });
  });
</script>
{% endblock %}