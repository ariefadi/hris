{% extends "admin_base.html" %}
{% load static %}
{% block page_title %}Adsense Manager{% endblock %}

{% block page_heading %}Adsense Manager{% endblock %}

{% block breadcrumbs %}
    <li class="breadcrumb-item"><a href="{% url 'dashboard_admin' %}">Dashboard</a></li>
    <li class="breadcrumb-item active">Adsense Manager</li>
{% endblock %}
{% block content %}  
{% csrf_token %}
<style>
  .dt-buttons { margin-bottom: 20px; }
  table td, table th { vertical-align: middle; }
</style>
<div class="card">
    <div class="card-header">
        <h3 class="card-title">AdSense Account Data</h3>
    </div>
    <div class="card-body">
        <div id="overlay"
             style="
                 display: none;
                 position: fixed;
                 top: 0; left: 0;
                 width: 100%; height: 100%;
                 background: rgba(0,0,0,0.5);
                 z-index: 9999;
                 text-align: center;
                 color: white;
                 font-size: 2rem;
                 padding-top: 20%;">
            <i class="fas fa fa-sync-alt fa-spin"></i> Memuat Data Akun AdSense ...
        </div>
        <div class="row mb-3">
            <div class="col-md-6">
                <label for="select_credentials" class="form-label">Pilih Kredensial AdSense</label>
                <select id="select_credentials" class="form-select">
                    <option value="">Memuat kredensial...</option>
                </select>
            </div>
            <div class="col-md-6 d-flex align-items-end">
                <button id="btn_reload" class="btn btn-primary">
                    <i class="bi bi-arrow-repeat"></i> Muat Data
                </button>
            </div>
        </div>
        <div class="table-responsive">
            <table class="table table-bordered" id="table_adsense_account">
                <thead class="table-light">
                    <tr>
                        <th class="text-center" width="5%">No</th>
                        <th>Account ID</th>
                        <th>Email</th>
                        <th class="text-center">Sites</th>
                        <th class="text-center">Authorized</th>
                    </tr>
                </thead>
                <tbody id="tbody_adsense_account"></tbody>
            </table>
        </div>
        <hr/>
        <div class="table-responsive mt-3">
            <table class="table table-bordered" id="table_adsense_units">
                <thead class="table-light">
                    <tr>
                        <th class="text-center" width="5%">No</th>
                        <th>Ad Client</th>
                        <th>Ad Unit Name</th>
                    </tr>
                </thead>
                <tbody id="tbody_adsense_units"></tbody>
            </table>
        </div>
        <div id="account_info" class="alert alert-info mt-3" style="display:none"></div>
    </div>
 </div>

<script src="{% static 'ajax/admin/adsense_manager/account.js' %}"></script>
{% endblock %}
